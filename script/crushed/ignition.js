function deleteBlogPost(o){$.ajax({type:"POST",url:"/admin/deleteBlogPost",dataType:"json",data:{postID:o},success:function(o){o.error===!0?showErrorModal(o.errorMessage,!1,!1):window.location="/admin/blog/edit"},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}
function viewMoreGames(){currentPage++,loadCollection(currentPage)}function loadCollection(){$.ajax({type:"POST",url:"/user/getCollection",dataType:"json",data:{userID:UserID,page:currentPage,filters:JSON.stringify(filters)},success:function(e){if(e.error===!0)showErrorModal(e.errorMessage,!1,!1);else{var t="",a=e.collection;if(null!=a)for(i=0;i<a.length;++i){t+='<div class="panel panel-default collectionItem media clearfix">',t+='     <div class="pull-left">',t+='         <img src="'+a[i].ImageSmall+'" class="tinyIconImage imageShadow" />',t+="     </div>",t+='     <div class="media-body eventComment">',t+='         <a href="/game/'+a[i].GBID+'">'+a[i].Name+"</a></b>";var l=a[i].Platforms;if(null!=l)for(t+=" on ",x=0;x<l.length;x++)t+=l[x].Abbreviation,x==l.length-2?t+=" and ":x<l.length-1&&(t+=", ");t+="         <div>",t+='             <span class="label label-'+a[i].ListStyle+'">'+a[i].ListName+"</span>",t+='             <span class="label label-'+a[i].StatusStyle+'">'+a[i].StatusName+"</span>",t+="         </div>",t+="     </div>",t+="</div>"}$("#collectionCount").html(e.stats.Collection),$("#completeCount").html(e.stats.Completed),$("#backlogCount").html(e.stats.Backlog),$("#wantCount").html(e.stats.Want),$("#completionPercentage").width(e.stats.PercentComplete+"%"),$("#completionPercentageLabel").html(e.stats.PercentComplete),1==currentPage?$("#gameCollection").html(t):$("#gameCollection").append(t),$("#gameCollectionViewMore").html(a.length>0?30==a.length?"<a class='btn btn-default btn-fullWidth' onclick='viewMoreGames()''>View More</a>":"":"<div class='alert alert-warning alert-dismissable'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button> No games found handsome.</div>")}},error:function(){showErrorModal("Well nuts. It appears that something didnt go to plan. Please call the coast guard imediately.")}})}var filters={lists:[],statuses:[],platforms:[],includeNoPlatforms:!0,orderBy:"releaseDateDesc"},currentPage=1;$(document).ready(function(){$(":checkbox").change(function(){if(match=this.id.match("filter_([a-z]+)_([0-9]+)"),3==match.length){$(this).prop("disabled",!0);var e=parseInt(match[2]),t=match[1],a=this;if("platform"==t&&0==e)filters.includeNoPlatforms=a.checked?!0:!1;else{var l;switch(t){case"list":l=filters.lists;break;case"platform":l=filters.platforms;break;case"status":l=filters.statuses}if(a.checked){var s=l.indexOf(e);l.splice(s,1)}else l.push(e)}currentPage=1,loadCollection(currentPage),$(a).prop("disabled",!1)}}),$("input[name='orderBy']").change(function(){filters.orderBy=$("input[name='orderBy']:checked").val(),currentPage=1,loadCollection()})});
function postComment(e,a){var o=$("#commentField"+e).val(),s=$("#nameInput"+e).val(),n=$("#emailInput"+e).val();return""==o?void showErrorModal("You need to type something duder!"):void $.ajax({type:"POST",url:"/user/comment",dataType:"json",data:{linkID:e,comment:o,commentTypeID:a,name:s,email:n},success:function(a){if(a.error===!0)showErrorModal(a.errorMessage,a.errorProgressURL,a.errorProgressCTA);else{var o;o='<div class="clearfix eventCommentDisplay">',o+='     <div class="media-left">',o+='         <img src="/uploads/'+a.profileImage+'" class="tinyIconImage imageShadow" />',o+="     </div>",o+='     <div class="media-body eventComment">',o+=a.registeredUser?'         <a href="/user/'+a.userID+'"><b>'+a.username+"</b></a>"+a.comment:"         <b>"+a.username+"</b>"+a.comment,o+='         <span class="datestamp pull-right">Just now</span>',o+="     </div>",o+="</div>",$("#newComment"+e).append(o),$("#commentField"+e).val("")}},error:function(){showErrorModal("Well nuts. It appears that something didnt go to plan. Please call the coast guard imediately.")}})}function showComments(e){$("#hiddenComments"+e).removeClass("hidden"),$("#hiddenCommentLink"+e).addClass("hidden")}
function addGame(e,o,a){$("#gameButton"+e).addClass("disabled").html("Saving..."),$.ajax({type:"POST",url:"/games/add",dataType:"json",data:{gbID:e,listID:o},success:function(o){o.error===!0?showErrorModal(o.errorMessage):a?location.reload():($("#gameButton"+e).html(o.listName+' <span class="caret"></span>').removeClass().addClass("btn btn-"+o.listStyle+" dropdown-toggle"),$("#inCollectionControls"+e).removeClass("hidden"),$("#platforms"+e).find("input[type=checkbox]").prop("readonly",!1),null!=o.autoSelectPlatform&&$("#platform_"+e+"_"+o.autoSelectPlatform).prop("checked",!0))},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}function changeStatus(e,o){$("#statusButton"+e).addClass("disabled").html("Saving..."),$.ajax({type:"POST",url:"/games/changeStatus",dataType:"json",data:{gbID:e,statusID:o},success:function(o){o.error===!0?showErrorModal(o.errorMessage):$("#statusButton"+e).html(o.statusName+' <span class="caret"></span>').removeClass().addClass("btn btn-"+o.statusStyle+" dropdown-toggle")},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}function showRemoveGameWarning(e){$("#removeGameButtonPlaceholder").html("<a id='removeGameButton"+e+"' onclick='javascript:removeFromCollection("+e+");'' class='btn btn-danger'>Remove from Collection</a>"),$("#removeGameModal").modal()}function removeFromCollection(e){$("#removeGameButton"+e).addClass("disabled").html("Removing..."),$.ajax({type:"POST",url:"/games/remove",dataType:"json",data:{gbID:e},success:function(e){e.error===!0?($("#removeGameModal").modal("hide"),showErrorModal(e.errorMessage)):location.reload()},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}function saveProgression(e){$("#progressionSaveButton").addClass("disabled").html("Saving..."),$.ajax({type:"POST",url:"/games/saveProgression",dataType:"json",data:{gbID:e,currentlyPlaying:$("#currentlyPlayingInput").val(),hoursPlayed:$("#hoursPlayedInput").val(),dateCompleted:$("#dateCompletedInput").val()},success:function(e){e.error===!0?showErrorModal(e.errorMessage):$("#progressionSaveButton").removeClass("disabled").html("Saved")},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}$(document).ready(function(){$(":checkbox").change(function(){if(match=this.id.match("platform_([0-9]+)_([0-9]+)"),3==match.length){$(this).prop("disabled",!0);var e=this;$.ajax(this.checked?{type:"POST",url:"/games/addPlatform",dataType:"json",data:{gbID:match[1],platformID:match[2]},success:function(o){o.error===!0?($(e).prop("disabled",!1),$(e).prop("checked",!1),showErrorModal(o.errorMessage,o.errorProgressURL,o.errorProgressCTA)):$(e).prop("disabled",!1)},error:function(){$(e).prop("disabled",!1),$(e).prop("checked",!1),showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}}:{type:"POST",url:"/games/removePlatform",dataType:"json",data:{gbID:match[1],platformID:match[2]},success:function(o){o.error===!0?($(e).prop("disabled",!1),$(e).prop("checked",!0),showErrorModal(o.errorMessage)):$(e).prop("disabled",!1)},error:function(){$(e).prop("disabled",!1),$(e).prop("checked",!0),showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}})});
function showErrorModal(r,s,o){$("#errorModalMessage").html(r),s&&($("#errorModalDismiss").attr("href",s),$("#errorModalDismiss").text(o),$("#errorModalDismiss").attr("data-dismiss","false")),$("#errorModal").modal()}
!function(e){e.fn.autogrow=function(){return this.filter("textarea").each(function(){var t=this,n=e(t),i=n.height(),o=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight"))||0,a=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),r=function(e){var r=function(e,t){for(var n=0,i="";t>n;n++)i+=e;return i},s=t.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return r("&nbsp;",e.length-1)+" "});e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(s+="<br />"),a.css("width",n.width()),a.html(s+(0===o?"...":"")),n.height(Math.max(a.height()+o,i))};n.change(r).keyup(r).keydown({event:"keydown"},r),e(window).resize(r),r()})}}(jQuery);
$(document).ready(function(){$(".progress-bar").each(function(){var t=$(this);t.css("width",t.attr("data-percentage")+"%")})});
function changeFollowingStatus(o){$("#followButton").addClass("disabled").html("Saving..."),$.ajax({type:"POST",url:"/user/follow",dataType:"json",data:{followUserID:o},success:function(o){if(o.error===!0)showErrorModal(o.errorMessage,o.errorProgressURL,o.errorProgressCTA);else{var r,l;o.followingUser?(r="Following",l="success"):(r="Follow",l="default"),$("#followButton").html("<span class='glyphicon glyphicon-star'></span> "+r).removeClass().addClass("btn btn-"+l+" btn-fullWidth")}},error:function(){showErrorModal("Well shit. Some kind of error gone done happened. Please try again.")}})}